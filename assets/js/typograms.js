const ratio=2;function grid(t,e){const s=document.createElementNS("http://www.w3.org/2000/svg","g");const n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1",15);n.setAttribute("y1",0);n.setAttribute("x2",15);n.setAttribute("y2",54);n.setAttribute("class","center");const r=document.createElementNS("http://www.w3.org/2000/svg","line");r.setAttribute("x1",0);r.setAttribute("y1",30);r.setAttribute("x2",30);r.setAttribute("y2",54);r.setAttribute("class","center");for(let n=0;n<=t*30;n+=3){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",n);t.setAttribute("y1",0);t.setAttribute("x2",n);t.setAttribute("y2",54*e);t.setAttribute("class","grid");s.appendChild(t)}for(let n=0;n<=e*54;n+=3){const e=document.createElementNS("http://www.w3.org/2000/svg","line");e.setAttribute("x1",0);e.setAttribute("y1",n);e.setAttribute("x2",30*t);e.setAttribute("y2",n);e.setAttribute("class","grid");s.appendChild(e)}return s}const glyphs={};glyphs["|"]=(([t,e,s,n,r,l,a,i])=>{const o=document.createElementNS("http://www.w3.org/2000/svg","g");if(e=="_"){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1","18");t.setAttribute("y1","51");t.setAttribute("x2","30");t.setAttribute("y2","51");t.setAttribute("class","part");o.appendChild(t)}if(n=="_"){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1","0");t.setAttribute("y1","51");t.setAttribute("x2","12");t.setAttribute("y2","51");t.setAttribute("class","part");o.appendChild(t)}if(r=="_"){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1","12");t.setAttribute("y1","-3");t.setAttribute("x2","30");t.setAttribute("y2","-3");t.setAttribute("class","part");o.appendChild(t)}if(i=="_"){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1","0");t.setAttribute("y1","-3");t.setAttribute("x2","18");t.setAttribute("y2","-3");t.setAttribute("class","part");o.appendChild(t)}o.appendChild(cross([!(r=="/"&&i=="\\"),["-"].includes(e),!(a=="/"&&l=="\\"),["-"].includes(n),r=="/",l=="\\",a=="/",i=="\\"]));return o});glyphs["-"]=(([t,e,s,n,r,l,a,i])=>{return cross([["|"].includes(t),true,["|"].includes(s),true,false,false,false,false])});glyphs["~"]=(([t,e,s,n,r,l,a,i])=>{const o=document.createElementNS("http://www.w3.org/2000/svg","g");const c=document.createElementNS("http://www.w3.org/2000/svg","line");c.setAttribute("x1","9");c.setAttribute("y1","27");c.setAttribute("x2","24");c.setAttribute("y2","27");c.setAttribute("class","part");o.appendChild(c);return o});glyphs["_"]=(t=>{const e=glyphs["-"](t);e.setAttribute("transform","translate(0 24)");return e});glyphs[":"]=(([t,e,s,n,r,l,a,i])=>{const o=document.createElementNS("http://www.w3.org/2000/svg","g");const c=document.createElementNS("http://www.w3.org/2000/svg","line");c.setAttribute("x1","15");c.setAttribute("y1","0");c.setAttribute("x2","15");c.setAttribute("y2","60");c.setAttribute("class","part");c.setAttribute("style","stroke-dasharray: 15; stroke-dashoffset: 0;");o.appendChild(c);if(t=="+"){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1","15");t.setAttribute("y1","-24");t.setAttribute("x2","15");t.setAttribute("y2","-15");t.setAttribute("class","part");o.appendChild(t)}if(s=="+"){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1","15");t.setAttribute("y1","60");t.setAttribute("x2","15");t.setAttribute("y2","78");t.setAttribute("class","part");o.appendChild(t)}return o});glyphs["="]=(t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","g");const s=document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("x1","0");s.setAttribute("y1","21");s.setAttribute("x2","30");s.setAttribute("y2","21");s.setAttribute("class","part");e.appendChild(s);const n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttribute("x1","0");n.setAttribute("y1","30");n.setAttribute("x2","30");n.setAttribute("y2","30");n.setAttribute("class","part");e.appendChild(n);return e});glyphs["*"]=(([t,e,s,n,r,l,a,i])=>{const o=document.createElementNS("http://www.w3.org/2000/svg","g");const c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.setAttribute("cx","0");c.setAttribute("cy","0");c.setAttribute("r","21");c.setAttribute("stroke","none");c.setAttribute("transform","translate(15, 27)");o.appendChild(c);o.appendChild(cross([["+","|"].includes(t),["+","-"].includes(e),["+","|"].includes(s),["+","-"].includes(n),["/"].includes(r),["\\"].includes(l),["/"].includes(a),["\\"].includes(i)]));return o});glyphs["o"]=(([t,e,s,n,r,l,a,i])=>{const o=document.createElementNS("http://www.w3.org/2000/svg","g");const c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.setAttribute("cx","0");c.setAttribute("cy","0");c.setAttribute("r","18");c.setAttribute("stroke-width","6");c.setAttribute("fill","none");c.setAttribute("stroke","var(--global-text-color)");c.setAttribute("transform","translate(15, 27)");o.appendChild(c);const p=cross([["+","|"].includes(t),["+","-"].includes(e),["+","|"].includes(s),["+","-"].includes(n),["/"].includes(r),["\\"].includes(l),["/"].includes(a),["\\"].includes(i)]);o.appendChild(p);const u=document.createElementNS("http://www.w3.org/2000/svg","circle");u.setAttribute("cx","0");u.setAttribute("cy","0");u.setAttribute("r","15");u.setAttribute("fill","white");u.setAttribute("opacity","100%");u.setAttribute("transform","translate(15, 27)");o.appendChild(u);return o});glyphs["/"]=(t=>{const[e,s,n,r,l,a,i,o]=t;const c=document.createElementNS("http://www.w3.org/2000/svg","g");c.appendChild(cross([["|"].includes(e),false,["|"].includes(n),false,true,false,true,false]));if(s=="\\"){const t=cross([false,false,false,false,false,false,true,false]);t.setAttribute("transform","translate(30 -54)");t.setAttribute("clip-path","polygon(-3 0, 0 0, 0 54, -3 54)");c.appendChild(t)}if(r=="\\"){const t=cross([false,false,false,false,true,false,false,false]);t.setAttribute("transform","translate(-30 54)");t.setAttribute("clip-path","polygon(15 -6, 33 -6, 33 6, 15 6)");c.appendChild(t)}if(s=="_"){const e=glyphs["_"](t);c.appendChild(e)}return c});glyphs["\\"]=(t=>{const[e,s,n,r,l,a,i,o]=t;const c=document.createElementNS("http://www.w3.org/2000/svg","g");c.appendChild(cross([["|"].includes(e),false,["|"].includes(n),false,false,true,false,true]));if(r=="/"){const t=cross([false,false,false,false,false,true,false,false]);t.setAttribute("transform","translate(-30 -54)");t.setAttribute("clip-path","polygon(15 0, 30 0, 30 54, 15 54)");c.appendChild(t)}if(s=="/"){const t=cross([false,false,false,false,false,false,false,true]);t.setAttribute("transform","translate(30 54)");t.setAttribute("clip-path","polygon(-3 0, 0 0, 0 6, -3 6)");c.appendChild(t)}if(r=="_"){const e=glyphs["_"](t);c.appendChild(e)}return c});glyphs["#"]=(([t,e,s,n,r,l,a,i])=>{const o=document.createElementNS("http://www.w3.org/2000/svg","g");const c=document.createElementNS("http://www.w3.org/2000/svg","polygon");const p=[[0,0],[42,0],[42,42],[0,42]];c.setAttribute("points",p.map(([t,e])=>`${t},${e}`).join(" "));c.setAttribute("transform","translate(-6, 6)");o.appendChild(c);o.appendChild(cross([["+","|"].includes(t),["+","-"].includes(e),["+","|"].includes(s),["+","-"].includes(n),["/"].includes(r),["\\"].includes(l),["/"].includes(a),["\\"].includes(i)]));return o});glyphs["+"]=(([t,e,s,n,r,l,a,i])=>{const o=document.createElementNS("http://www.w3.org/2000/svg","g");const c=["*","#","-","+","~",">",".","'","`"].includes(e);const p=["*","#","-","+","~","<",".","'","`"].includes(n);const u=["*","#","|","+",".","`","^"].includes(t);const d=["*","#","|","+","'","`","v"].includes(s);const w=["/","*","#"].includes(r);const f=["\\","*","#"].includes(l);const h=["\\","*","#"].includes(i);const g=["/","*","#"].includes(a);o.appendChild(cross([u,c,d,p,w,f,g,h]));if((p||c)&&(d||u)){const t=document.createElementNS("http://www.w3.org/2000/svg","polygon");t.setAttribute("points","0,0 6,0 6,6 0,6");t.setAttribute("transform","translate(-3 -3) translate(15 27)");o.appendChild(t)}if(w||h){const t=cross([false,false,false,false,false,h,w,false]);t.setAttribute("clip-path","polygon(0 -3, 30 -3, 30 0, 0 0)");o.appendChild(t)}if(f||g){const t=cross([false,false,false,false,g,false,false,f]);t.setAttribute("clip-path","polygon(0 27, 15 27, 15 30, 0 30)");o.appendChild(t)}if(g||h){const t=cross([false,false,false,false,g&&f,h&&w,false,false]);t.setAttribute("clip-path","polygon(-3 0, 0 0, 0 54, -3 54)");o.appendChild(t)}if(f||w){const t=cross([false,false,false,false,false,false,w&&h,f&&g]);t.setAttribute("clip-path","polygon(15 0, 30 0, 30 54, 15 54)");o.appendChild(t)}if(c||p){const t=cross([false,false,false,false,c||g,h,w,p||f]);t.setAttribute("clip-path","polygon(-3 24, 30 24, 30 30, -3 30)");o.appendChild(t)}return o});glyphs["."]=(([t,e,s,n,r,l,a,i])=>{const o=document.createElementNS("http://www.w3.org/2000/svg","g");if((e=="-"||e=="+")&&(s=="|"||s=="'"||s=="`"||s=="+")){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 30 24\n        A 18 18, 0, 0, 0, 12 42\n        L 12 54\n        L 18 54\n        L 18 42\n        A 12 12, 0, 0, 1, 30 30\n        Z`);o.appendChild(t)}if((n=="-"||n=="+")&&(s=="|"||s=="'"||s=="`"||s=="+")){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 0 24\n        A 18 18, 0, 0, 1, 18 42\n        L 18 54\n        L 12 54\n        L 12 42\n        A 12 12, 0, 0, 0, 0 30\n        Z`);o.appendChild(t)}if((e=="-"||e=="+")&&(t=="|"||t=="."||t=="+")){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 30 30\n        A 18 18, 0, 0, 1, 12 12\n        L 12 0\n        L 18 0\n        L 18 12\n        A 12 12, 0, 0, 0, 30 24\n        Z`);o.appendChild(t)}if((n=="-"||n=="+")&&(t=="|"||t=="."||t=="+")){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 0 30\n        A 18 18, 0, 0, 0, 18 12\n        L 18 0\n        L 12 0\n        L 12 12\n        A 12 12, 0, 0, 1, 0 24\n        Z`);o.appendChild(t)}if(e=="-"&&r=="/"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 30 30\n        A 12 12, 0, 0, 1, 18 18\n        L 18 15\n        L 24 15\n        L 24 18\n        A 6 6, 0, 0, 0, 30 24\n        Z`);o.appendChild(t);const e=cross([false,false,false,false,true,false,false,false]);e.setAttribute("clip-path","polygon(15px -10px, 30px -10px, 30px 30px, 2px 15px)");o.appendChild(e)}if(e=="-"&&i=="\\"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M -3 0\n        A 60 60, 0, 0, 0, 30 30\n        L 30 24\n        A 60 60, 0, 0, 1, 0 -6\n        Z`);o.appendChild(t)}if(n=="-"&&r=="/"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 0 30\n        A 60 60, 0, 0, 0, 33 0\n        L 30 -6\n        A 60 60, 0, 0, 1, 0 24\n        Z`);o.appendChild(t)}if(n=="-"&&i=="\\"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 0 30\n        A 12 12, 0, 0, 0, 12 18\n        L 12 15\n        L 6 15\n        L 6 18\n        A 6 6, 0, 0, 1, 0 24\n        Z`);o.appendChild(t);const e=cross([false,false,false,false,false,false,false,true]);e.setAttribute("clip-path","polygon(-3 -3, 12 -3, 12 18, -3 18)");o.appendChild(e)}if(s=="|"&&r=="/"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 12 54\n        A 120 120, 0, 0, 1, 30 -6\n        L 37 -6\n        A 120 120, 0, 0, 0, 18 54\n        Z`);o.appendChild(t)}if(t=="|"&&l=="\\"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 30 60\n        A 120 120, 0, 0, 1, 12 0\n        L 18 0\n        A 120 120, 0, 0, 0, 37 60\n        Z`);o.appendChild(t)}if(t=="|"&&a=="/"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 0 60\n        A 120 120, 0, 0, 0, 18 0\n        L 12 0\n        A 120 120, 0, 0, 1, -7 60\n        Z`);o.appendChild(t)}if(s=="|"&&i=="\\"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 12 54\n        A 120 120, 0, 0, 0, -7 -6\n        L 0 -6\n        A 120 120, 0, 0, 1, 18 54\n        Z`);o.appendChild(t)}if(e=="-"&&a=="/"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 0 48\n        A 42 42, 0, 0, 1, 30 24\n        L 30 30\n        A 42 42, 0, 0, 0, 6 48\n        Z`);o.appendChild(t);const e=cross([false,false,false,false,false,false,true,false]);e.setAttribute("clip-path","polygon(-3 15, 12 15, 12 30, -3 30)");o.appendChild(e)}if(n=="-"&&l=="\\"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 0 24\n        A 42 42, 0, 0, 1, 30 48\n        L 24 48\n        A 42 42, 0, 0, 0, 0 30\n        Z`);o.appendChild(t);const e=cross([false,false,false,false,false,true,false,false]);e.setAttribute("clip-path","polygon(-3 15, 12 15, 21 30, -3 30)");o.appendChild(e)}if(n=="-"&&a=="/"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 0 24\n        A 12 12, 0, 0, 1, 12 39\n        L 6 39\n        A 6 6, 0, 0, 0, 0 30\n        Z`);o.appendChild(t);const e=cross([false,false,false,false,false,false,true,false]);e.setAttribute("clip-path","polygon(-3 6, 12 6, 12 30, -3 30)");o.appendChild(e)}if(e=="-"&&l=="\\"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 30 24\n        A 12 12, 0, 0, 0, 18 39\n        L 24 39\n        A 6 6, 0, 0, 1, 30 30\n        Z`);o.appendChild(t);const e=cross([false,false,false,false,false,true,false,false]);e.setAttribute("clip-path","polygon(3 6, 18 6, 18 30, 3 30)");o.appendChild(e)}if(a=="/"&&l=="\\"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 3 42\n        A 15 15, 0, 0, 1, 27 42\n        L 25 51\n        A 9 9, 0, 0, 0, 5 51\n        Z`);o.appendChild(t);const e=cross([false,false,false,false,false,true,true,false]);e.setAttribute("clip-path","polygon(-3 15, 33 15, 33 30, -3 30)");o.appendChild(e)}if(i=="\\"&&r=="/"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 3 12\n        A 15 15, 0, 0, 0, 27 12\n        L 22 9\n        A 9 9, 0, 0, 1, 8 9\n        Z`);o.appendChild(t);const e=cross([false,false,false,false,true,false,false,true]);e.setAttribute("clip-path","polygon(-3 -3, 33 -3, 33 12, -3 12)");o.appendChild(e)}if(r=="/"&&l=="\\"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 22 9\n        A 30 30, 0, 0, 0, 22 45\n        L 28 45\n        A 30 30, 0, 0, 1, 28 9\n        Z`);o.appendChild(t);const e=cross([false,false,false,false,true,true,false,false]);e.setAttribute("clip-path","polygon(6 -3, 33 -3, 33 57, 6 57)");o.appendChild(e)}if(i=="\\"&&a=="/"){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",`\n        M 8 9\n        A 30 30, 0, 0, 1, 8 45\n        L 2 45\n        A 30 30, 0, 0, 0, 2 9\n        Z`);o.appendChild(t);const e=cross([false,false,false,false,false,false,true,true]);e.setAttribute("clip-path","polygon(-3 -3, 9 -3, 9 57, -3 57)");o.appendChild(e)}return o});const alias={"\u250c":"+","\u2510":"+","\u2514":"+","\u2518":"+","\u2500":"-","\u25ba":">","'":".","`":".",V:"v"};for(const[t,e]of Object.entries(alias)){glyphs[t]=(t=>{return glyphs[e](t)})}glyphs[">"]=(([t,e,s,n,r,l,a,i])=>{const o=document.createElementNS("http://www.w3.org/2000/svg","g");const c=document.createElementNS("http://www.w3.org/2000/svg","polygon");c.setAttribute("points","0,0 42,18 0,36");let p=0;if(e=="*"||e=="o"||e=="#"){p-=18}c.setAttribute("transform",`translate(${p} 9)`);o.appendChild(c);return o;const u=document.createElementNS("http://www.w3.org/2000/svg","polygon");u.setAttribute("points","-3,0 6,0 6,6 -3,6");u.setAttribute("transform","translate(15 24)");o.appendChild(u);o.appendChild(cross([false,false,false,["-","+"].includes(n),false,false,["/"].includes(a),["\\"].includes(i)]));return o});glyphs["<"]=(([t,e,s,n,r,l,a,i])=>{const o=document.createElementNS("http://www.w3.org/2000/svg","g");const c=document.createElementNS("http://www.w3.org/2000/svg","polygon");c.setAttribute("points","0,0 42,18 0,36");let p=30;if(n=="*"||n=="o"||n=="#"){p+=18}c.setAttribute("transform",`translate(${p} 9) translate(0 36) rotate(180)`);o.appendChild(c);return o;o.appendChild(cross([false,["-","+"].includes(e),false,false,["/"].includes(r),["\\"].includes(l),false,false]));return o});glyphs["v"]=(([t,e,s,n,r,l,a,i])=>{const o=document.createElementNS("http://www.w3.org/2000/svg","g");const c=document.createElementNS("http://www.w3.org/2000/svg","polygon");c.setAttribute("points","0,0 42,18 0,36");let p=36;if(s==" "){p=12}else if(s=="_"){p+=18}else if(s=="*"||s=="o"||s=="#"){p-=18}if(r=="/"){c.setAttribute("transform",`translate(-36 33) rotate(${90+22.5}, 42, 18)`)}else if(i=="\\"){c.setAttribute("transform",`translate(-18 33) rotate(${90-22.5}, 42, 18)`)}else{c.setAttribute("transform",`translate(33 ${p}) rotate(90)`)}o.appendChild(c);o.appendChild(cross([["|","+"].includes(t),false,["|","+"].includes(t),false,["/"].includes(r),false,false,["\\"].includes(i)]));return o});glyphs["^"]=(([t,e,s,n,r,l,a,i])=>{const o=document.createElementNS("http://www.w3.org/2000/svg","g");const c=document.createElementNS("http://www.w3.org/2000/svg","polygon");c.setAttribute("points","0,0 42,18 0,36");let p=42;if(t=="-"){p-=15}if(a=="/"){c.setAttribute("transform",`translate(-18 -15) rotate(${-45-22.5}, 42, 18)`)}else if(l=="\\"){c.setAttribute("transform",`translate(-36 -15) rotate(${-90-22.5}, 42, 18)`)}else{c.setAttribute("transform",`translate(-3 ${p}) rotate(-90)`)}o.appendChild(c);o.appendChild(cross([false,false,["+","|"].includes(s),false,false,["\\"].includes(l),["/"].includes(a),false]));return o});function cross([t,e,s,n,r,l,a,i]){const o=document.createElementNS("http://www.w3.org/2000/svg","g");if(t){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",15);t.setAttribute("y1",0);t.setAttribute("x2",15);t.setAttribute("y2",27);t.setAttribute("class","part");o.appendChild(t)}if(e){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",15);t.setAttribute("y1",27);t.setAttribute("x2",30);t.setAttribute("y2",27);t.setAttribute("class","part");o.appendChild(t)}if(s){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",15);t.setAttribute("y1",27);t.setAttribute("x2",15);t.setAttribute("y2",54);t.setAttribute("class","part");o.appendChild(t)}if(n){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",0);t.setAttribute("y1",27);t.setAttribute("x2",15);t.setAttribute("y2",27);t.setAttribute("class","part");o.appendChild(t)}const c=document.createElementNS("http://www.w3.org/2000/svg","polygon");c.setAttribute("points",[[0,0],[20.6,0],[20.6,3],[0,3]].map(([t,e])=>`${t},${e}`).join(" "));if(r){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",30);t.setAttribute("y1",0);t.setAttribute("x2",15);t.setAttribute("y2",27);t.setAttribute("class","part");o.appendChild(t)}if(l){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",15);t.setAttribute("y1",27);t.setAttribute("x2",30);t.setAttribute("y2",54);t.setAttribute("class","part");o.appendChild(t)}if(a){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",15);t.setAttribute("y1",27);t.setAttribute("x2",0);t.setAttribute("y2",54);t.setAttribute("class","part");o.appendChild(t)}if(i){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("x1",0);t.setAttribute("y1",0);t.setAttribute("x2",15);t.setAttribute("y2",27);t.setAttribute("class","part");o.appendChild(t)}return o}function text(t,e){const s=document.createElementNS("http://www.w3.org/2000/svg","g");const n=document.createElementNS("http://www.w3.org/2000/svg","text");const r=document.createTextNode(t);n.appendChild(r);if(e){n.setAttribute("class","reserved")}const l=[[15,24]];n.setAttribute("transform",l.map(([t,e])=>`translate(${t}, ${e})`).join(" "));s.appendChild(n);return s}function render(t){const e=document.createElementNS("http://www.w3.org/2000/svg","g");for(let s=0;s<t.length;s++){for(let n=0;n<t[s].length;n++){const r=t[s][n];if(r==" "||r=='"'){continue}let l=glyphs[r];const a=document.createElementNS("http://www.w3.org/2000/svg","g");let i=false;for(let e=0;e<n;e++){if(t[s][e]=='"'){i=!i}}const o=around(t,[n,s]);if(r.match(/[A-Za-z0-9]/)){const[,t,,e]=o;i=i||e.match(/[A-Za-uw-z0-9]/)||t.match(/[A-Za-uw-z0-9]/)}l=l&&!i;if(l){a.appendChild(glyphs[r](o))}a.appendChild(text(r,l));a.setAttribute("transform",`translate(${n*30} ${s*54})`);e.appendChild(a)}}return e}function create(t,e,s){const n=t.split("\n").map(t=>t.trimEnd().split(""));n.shift();n.splice(-1);let r=0;const l=n.length;for(let t=0;t<n.length;t++){for(let e=0;e<n[t].length;e++){if(n[t].length>r){r=n[e].length}}}var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("width",r*30*e);a.setAttribute("height",l*54*e);a.setAttribute("debug",s);const i=0;a.setAttribute("viewBox",`${-i} ${-i} ${r*30+2*i} ${l*54+2*i}`);a.setAttribute("class","debug");a.appendChild(render(n));if(s){a.appendChild(grid(r,l))}return a}function around(t,[e,s]){let n=" ";let r=" ";let l=" ";let a=" ";let i=" ";let o=" ";let c=" ";let p=" ";if(s>0){r=t[s-1][e]||" "}if(e<t[s].length-1){l=t[s][e+1]||" "}if(s<t.length-1){a=t[s+1][e]||" "}if(e>0){n=t[s][e-1]||" "}if(s>0&&e<t[s-1].length-1){i=t[s-1][e+1]||" "}if(s+1<t.length&&e<t[s+1].length){o=t[s+1][e+1]||" "}if(s<t.length-1&&e>0){c=t[s+1][e-1]||" "}if(s>0&&e>0){p=t[s-1][e-1]||" "}return[r,l,a,n,i,o,c,p]}